<div id="page-container"
    class="sidebar-inverse side-scroll page-header-inverse page-header-fixed main-content-boxed enable-page-overlay">
    <!-- Sidebar -->
    <nav id="sidebar">
        <!-- Sidebar Content -->
        <div class="sidebar-content">
            <!-- Side Header -->
            <div class="content-header content-header-fullrow bg-black-op-10">
                <div class="content-header-section text-center align-parent">
                    <button type="button" class="btn btn-circle btn-dual-secondary d-lg-none align-v-r"
                        data-toggle="layout" data-action="sidebar_close">
                        <i class="fa fa-times text-danger"></i>
                    </button>
                    <!-- END Close Sidebar -->

                    <!-- Logo -->
                    <div class="content-header-item">
                        <a class="link-effect font-w700" href="#">
                            <i class="si si-grid text-primary"></i>
                            <span class="font-size-xl text-dual-primary-dark">Todo</span><span
                                class="font-size-xl text-primary">tive</span>
                        </a>
                    </div>
                    <!-- END Logo -->
                </div>
            </div>
            <!-- END Side Header -->

            <!-- Side Main Navigation -->
            <div class="content-side content-side-full">
                <ul class="nav-main">
                    <li>
                        <a href="#todos-active">
                            <i class="si si-cup"></i> My Todos
                        </a>
                    </li>
                    <li class="nav-main-heading">
                        Heading
                    </li>
                    <li>
                        <a href="#projects" class="active">
                            <i class="si si-rocket"></i> Projects
                        </a>
                    </li>
                </ul>
            </div>
            <!-- END Side Main Navigation -->
        </div>
        <!-- Sidebar Content -->
    </nav>
    <!-- END Sidebar -->

    <!-- Header -->
    <header id="page-header">
        <!-- Header Content -->
        <div class="content-header">
            <!-- Left Section -->
            <div class="content-header-section">
                <!-- Logo -->
                <div class="content-header-item">
                    <a class="link-effect font-w700 mr-5" href="#">
                        <i class="si si-grid text-primary"></i>
                        <span class="font-size-xl text-dual-primary-dark">Todo</span><span
                            class="font-size-xl text-primary">tive</span>
                    </a>
                </div>
                <!-- END Logo -->
            </div>
            <!-- END Left Section -->

            <!-- Middle Section -->
            <div class="content-header-section d-none d-lg-block">
                <ul class="nav-main-header">
                    <li>
                        <a href="#todos-active">
                            <i class="si si-cup"></i> My Todos
                        </a>
                    </li>
                    <li class="nav-main-heading">
                        Heading
                    </li>
                    <li>
                        <a href="#projects" class="active">
                            <i class="si si-rocket"></i> Projects
                        </a>
                    </li>
                </ul>
                <!-- END Header Navigation -->
            </div>
            <!-- END Middle Section -->

            <!-- Right Section -->
            <div class="content-header-section">
                <!-- User Dropdown -->
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-rounded btn-dual-secondary" id="page-header-user-dropdown"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span id="displayName"></span><i class="fa fa-angle-down ml-5"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right min-width-150"
                        aria-labelledby="page-header-user-dropdown">
                        <a class="dropdown-item" href="#">
                            <i class="si si-user mr-5"></i> Profile
                        </a>

                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#" onclick="signout()">
                            <i class="si si-logout mr-5"></i> Sign Out
                        </a>
                    </div>
                </div>
                <!-- END Right Section -->
            </div>
            <!-- END Header Content -->

            <!-- Header Search -->
            <div id="page-header-search" class="overlay-header">
                <div class="content-header content-header-fullrow">
                    <form>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <!-- Close Search Section -->
                                <!-- Layout API, functionality initialized in Codebase() -> uiApiLayout() -->
                                <button type="button" class="btn btn-secondary px-15" data-toggle="layout"
                                    data-action="header_search_off">
                                    <i class="fa fa-times"></i>
                                </button>
                                <!-- END Close Search Section -->
                            </div>
                            <input type="text" class="form-control" placeholder="Search or hit ESC.."
                                id="page-header-search-input" name="page-header-search-input">
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-secondary px-15">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- END Header Search -->

            <!-- Header Loader -->
            <div id="page-header-loader" class="overlay-header bg-primary">
                <div class="content-header content-header-fullrow text-center">
                    <div class="content-header-item">
                        <i class="fa fa-sun-o fa-spin text-white"></i>
                    </div>
                </div>
            </div>
            <!-- END Header Loader -->
    </header>
    <!-- END Header -->

    <!-- Main Container -->
    <main id="main-container">

        <!-- Page Content -->
        <div class="content">
            <!-- Tasks Content -->
            <div class="row">
                <div class="col-md-5 col-xl-3">
                    <!-- Toggle Tasks Navigation on mobile -->
                    <button type="button" class="btn btn-block btn-primary d-md-none mb-10" data-toggle="class-toggle"
                        data-target=".js-tasks-nav" data-class="d-none d-md-block">Menu</button>

                    <!-- Collapsible Tasks Navigation -->
                    <div class="js-tasks-nav d-none d-md-block">
                        <div class="block">
                            <div class="block-header block-header-default">
                                <h3 class="block-title">Task</h3>
                            </div>
                            <div class="block-content">
                                <div class="list-group push">
                                    <a href="#projects-active"
                                        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center active"
                                        href="javascript:void(0)">
                                        <span>
                                            <i class="fa fa-fw fa-tasks mr-5"></i>
                                            Active
                                        </span>
                                    </a>
                                    <a href="#projects-completed"
                                        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                                        href="javascript:void(0)">
                                        <span>
                                            <i class="fa fa-fw fa-check mr-5"></i>
                                            Completed
                                        </span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END Collapsible Tasks Navigation -->

                    <div class="block">
                        <div class="block-header bg-body-light">
                            <h3 class="block-title"><i class="fa fa-fw fa-users font-size-default mr-5"></i>Friends</h3>
                            <div class="block-options">
                                <button type="button" class="btn-block-option" data-toggle="block-option"
                                    data-action="state_toggle" data-action-mode="demo">
                                    <i class="si si-refresh"></i>
                                </button>
                                <button type="button" class="btn-block-option" data-toggle="block-option"
                                    data-action="content_toggle"></button>
                            </div>
                        </div>
                        <div class="block-content">
                            <ul class="nav-users push">
                                <div id="displayMember"></div>
                            </ul>
                        </div>
                    </div>

                </div>

                <div class="col-md-7 col-xl-9">
                    <!-- Tasks -->
                    <!-- Tasks functionality is initialized in js/pages/be_pages_generic_todo.min.js which was auto compiled from _es6/pages/be_pages_generic_todo.js -->
                    <div class="js-tasks">
                        <!-- Add task -->
                        <button class="btn btn-primary" id="addTaskButton" onclick="add()">Add a new task</button>
                        <!-- END Add task -->

                        <!-- Tasks List -->
                        <div id="displayTask"></div>
                        <!-- END Tasks List -->

                    </div>
                    <!-- END Tasks -->
                </div>
            </div>
            <!-- END Tasks Content -->
        </div>
        <!-- END Page Content -->

    </main>
    <!-- END Main Container -->
</div>
<script src="./public/js/all.js"></script>
<script src="./public/js/projects.js"></script>
<script>
    function isMember() {
        $.ajax({
            type: "GET",
            url: baseUrl + '/projects/' + localStorage.getItem('projectId'),
            beforeSend: function (request) {
                request.setRequestHeader("token", localStorage.getItem('token'));
            },
            success: function (response) {
                console.log(response.members);

                let tmpMember = '';
                $.each(response.members, (i, el) => {
                    tmpMember += `<li>
                                    <a href="#">
                                        <img class="img-avatar" src="assets/media/avatars/avatar2.jpg" alt="">
                                        <i class="fa fa-circle text-success"></i>
                                        ${el.name}
                                        <div class="font-w400 font-size-xs text-muted">${el.email}</div>
                                    </a>
                                </li>`
                });

                $('#displayMember').html(tmpMember);

                getTodos('active');
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.location.href = "#projects";

                Swal.fire({
                    position: 'top-center',
                    type: 'error',
                    title: "you does not have permission to access this page.",
                    showConfirmButton: false,
                    timer: 1500
                })
            }
        });
    }

    isMember();
    getTodos('active');
</script>